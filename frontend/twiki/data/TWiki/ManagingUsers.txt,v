head	1.9;
access;
symbols;
locks; strict;
comment	@# @;


1.9
date	2011.06.05.05.23.40;	author TWikiContributor;	state Exp;
branches;
next	1.8;

1.8
date	2010.05.29.14.44.54;	author TWikiContributor;	state Exp;
branches;
next	1.7;

1.7
date	2008.12.06.09.02.29;	author TWikiContributor;	state Exp;
branches;
next	1.6;

1.6
date	2008.01.22.03.21.26;	author TWikiContributor;	state Exp;
branches;
next	1.5;

1.5
date	2007.01.16.04.11.56;	author TWikiContributor;	state Exp;
branches;
next	1.4;

1.4
date	2006.06.25.16.26.25;	author TWikiContributor;	state Exp;
branches;
next	1.3;

1.3
date	2006.04.01.05.55.08;	author TWikiContributor;	state Exp;
branches;
next	1.2;

1.2
date	2006.02.01.12.01.17;	author TWikiContributor;	state Exp;
branches;
next	1.1;

1.1
date	2004.08.15.08.14.20;	author PeterThoeny;	state Exp;
branches;
next	;


desc
@none
@


1.9
log
@buildrelease
@
text
@%META:TOPICINFO{author="TWikiContributor" date="1307251420" format="1.1" version="9"}%
%STARTINCLUDE%
---+ Manage Users

_Register users on your TWiki site; change/reset/install passwords; remove user accounts_

%TOC%

%X% Some of the features below may be disabled, depending on your TWiki configuration.

---++ Authentication and Access Control

   * TWikiUserAuthentication describes your options for user authentication
   * TWikiAccessControl describes how to define groups and how to restrict access to content

---++ List Users

   * %USERSWEB%.%WIKIUSERSTOPIC% - list all registered users
   * %USERSWEB%.UserList - user list
   * %USERSWEB%.UserListByDateJoined - user list by date joined
   * %USERSWEB%.UserListByLocation - user list by location

---++ Register Users

You don't have to have user profile pages in TWiki for Authentication to work - see TWikiUserAuthentication for details.

   * TWikiRegistration is used when you want new users to individually register with TWiki by filling out a form

__For administrators only:__

   * BulkRegistration to register multiple users at the same time
   * Default user profile page form definition and template:
      * UserForm in %SYSTEMWEB% web - form definition (do not change)
      * NewUserTemplate in %SYSTEMWEB% web - template page (do not change)
   * Customized user profile page form definition and template:
      * %USERSWEB%.UserForm in %USERSWEB% web - form definition (clone from the one in the %SYSTEMWEB% web and customize)
      * %USERSWEB%.NewUserTemplate in %USERSWEB% web - template page (clone from the one in the %SYSTEMWEB% web and customize)

---++ Query and Edit User Account Data (Passwords, E-mails)

_Note that the below features are only relevant when you use an internal password manager where TWiki can set and reset passwords._

   * ChangePassword is for users who _can_ remember their password and want to change it
   * ResetPassword is for users who _cannot_ remember their password; a system generated password is e-mailed to them
   * ChangeEmailAddress changes the hidden email address stored in the password file

__For administrators only:__

   * QueryUsers to query and edit user account data (password, e-mail etc)
   * BulkResetPassword to reset many passwords at once

---++ Changing User Account Names

To change the user's WikiName:

   * Rename the user profile page in the %USERSWEB% web, such as from =JaneSmith= to =JaneMiller=.
      * Fix backlinks in the %USERSWEB% web only
      * Make sure the group topics are updated (if any.)
   * Edit the [[%USERSWEB%.TWikiUsers]] topic and move the user's entry so that the list is in proper alphabetical order.
   * Recreate the old topic with a pointer to the new topic, so that links in other webs work properly. Example content:%BR%
     =%<nop>M% Jane Smith is now known as !JaneMiller=

If external authentication is used and you want to change the login name:

   * The login name needs to be changed in the authentication server (e.g. Active Directory)
   * In TWiki's [[%USERSWEB%.TWikiUsers]] topic, fix the mapping from login name to WikiName:%BR%
     =&nbsp;  * !JaneSmith - jsmith - 13 Sep 2006= %BR%
     to: %BR%
     =&nbsp;  * !JaneMiller - jmiller - 13 Sep 2006=

---++ Removing User Accounts

To remove a user account (<nop>FredQuimby, who logs in as "fred"):

   1 If you are using a =.htpasswd= file, edit the =.htpasswd= file to delete the line starting =fred:=
      * *Warning:* Do *not* use the Apache =htpasswd= program with =.htpasswd= files generated by TWiki! =htpasswd= wipes out email addresses that TWiki plants in the info fields of this file.
   2 Remove the =FredQuimby - fred= line from the <nop>%USERSWEB%.TWikiUsers topic
   3 Remove =FredQuimby= from all groups and from all the =ALLOWWEB/ALLOWTOPIC...= declarations, if any.%BR% __Note:__ If you fail to do this you risk creating a security hole, as the next user to register with the wikiname Fred<nop>Quimby will inherit the old Fred<nop>Quimby's permissions.
   4 _[optional]_ Delete their user topic %USERSWEB%.<nop>FredQuimby (including attachments, if any.)

__Note:__ Consider leaving the user topic file in place so their past signatures and revision author entries don't end up looking like AnUncreatedTopic. If you want to make it clear the user is no longer around, replace the topic content with a note to that effect. The existence of the <nop>UserName topic should also prevent that user name from being re-used, sealing the potential security hole regarding inherited permissions..

---++ Customizing registration Emails.

TWiki's Registration can send 3 emails who's output is governed by templates:

   1 User registration confirmation - =templates/registerconfirm.tmpl=
   2 User registration notification - =templates/registernotify.tmpl=
   3 Email to notify the TWiki admin of registration - =templates/registernotifyadmin.tmpl=

As these are TWikiTemplates, they can be customized and selected using the SKIN path setting. Because there are default tmpl files in the =templates= dir, this cannot use Template topics.

These template files have a specific format that matches the raw format of emails sent via SMTP, so be careful and test your changes. It is easiest to start by copying the default templates:

<verbatim>
cd twiki/templates
cp registernotify.tmpl registernotify.myskin.tmpl
cp registerconfirm.tmpl registerconfirm.myskin.tmpl
cp registernotifyadmin.tmpl registernotifyadmin.myskin.tmpl
</verbatim>
then add =myskin= to the beginning of the =SKIN= setting in %USERSWEB%.TWikiPreferences.

From this point on, your myskin templates will be used for the registration emails.

To make it possible for TWikiUsers to modify the email contents, you could use a parameterized =%<nop>INCLUDE%= statement in your customized version. e.g.:

<verbatim>
From: %WIKIWEBMASTERNAME% <%WIKIWEBMASTER%>
To: %FIRSTLASTNAME% <%EMAILADDRESS%>
Subject: %MAKETEXT{"[_1] - Registration for [_2] ([_3])" args="%WIKITOOLNAME%, %WIKINAME%, %EMAILADDRESS%"}%
MIME-Version: 1.0
Content-Type: text/plain; charset=%CHARSET%
Content-Transfer-Encoding: 8bit

%INCLUDE{
    "Main.RegistrationNotification"
    WIKINAME="%WIKINAME%"
    FIRSTLASTNAME="%FIRSTLASTNAME%"
    EMAILADDRESS="%EMAILADDRESS%"
}%
</verbatim>

__Note:__ The use of %<nop>WIKINAME%, %<nop>FIRSTLASTNAME%, %<nop>EMAILADDRESS% passed in from the INCLUDE so that the topic below is similar to the original template.

And then create a topic %NOP%%USERSWEB%.RegisterNotifyEmail:
<verbatim>
Welcome to %WIKITOOLNAME%.

%MAKETEXT{"Your personal [_1] topic is located at [_2]. You can customize it as you like:" args="%WIKITOOLNAME%, %SCRIPTURL{"view"}%/%USERSWEB%/%WIKINAME%"}%

   * %MAKETEXT{"Some people turn it into a personal portal with favorite links, what they work on, what help they'd like, etc."}%
   * %MAKETEXT{"Some add schedule information and vacation notice."}%

Regards
%WIKIWEBMASTERNAME%
Your TWiki Admin

%MAKETEXT{"Note:"}%
   2 %MAKETEXT{"You can change your password at via [_1]" args="%SCRIPTURL{"view"}%/%SYSTEMWEB%/ChangePassword"}%
   3 %MAKETEXT{"If you haven't set a password yet or you want to reset it, go to: [_1]" args="%SCRIPTURL{"view"}%/%SYSTEMWEB%/ResetPassword"}%

%MAKETEXT{"Submitted content:"}%
%FORMDATA%

</verbatim>

__Note:__ Remember to secure the topic appropriately to prevent attackers from getting emailed sensitive passwords.

__%MAKETEXT{"Related topics:"}%__ UserToolsCategory, AdminToolsCategory

%META:PREFERENCE{name="ALLOWTOPICCHANGE" title="ALLOWTOPICCHANGE" type="Set" value="%25USERSWEB%25.TWikiAdminGroup"}%
@


1.8
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1273961677" format="1.1" version="8"}%
d16 1
a16 1
---++ Register User
d18 8
a25 1
You don't have to have user home pages in TWiki for Authentication to work - see TWikiUserAuthentication for details.
a27 2
   * You can create a custom versions of %SYSTEMWEB%.NewUserTemplate and %SYSTEMWEB%.UserForm
   * BulkRegistration is used by administrators to register multiple users at the same time
d29 11
a39 1
---++ Change, Reset and Install Passwords
a44 1
   * BulkResetPassword if for administrators who want to reset many passwords at once
d47 5
d56 1
a56 1
   * Rename the user's TWiki homepage in the %USERSWEB% web, such as from =JaneSmith= to =JaneMiller=.
a144 1
%META:PREFERENCE{name="ALLOWTOPICCHANGE" title="ALLOWTOPICCHANGE" type="Set" value="%USERSWEB%.TWikiAdminGroup"}%
d149 3
a151 1
__Related Topics:__ AdminDocumentationCategory
@


1.7
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1158277691" format="1.1" version="7"}%
d9 1
a9 2
%X% Some of the features below may be disabled, depending on your TWiki
configuration.
d14 1
a14 2
   * TWikiAccessControl describes how to define groups and how to restrict
     access to content
d18 1
a18 2
You don't have to have user home pages in TWiki for Authentication to
work - see TWikiUserAuthentication for details.
d20 3
a22 6
   * TWikiRegistration is used when you want new users to individually
     register with TWiki by filling out a form
   * You can create a custom versions of %TWIKIWEB%.NewUserTemplate and
     %TWIKIWEB%.UserForm
   * BulkRegistration is used by administrators to register multiple users at
     the same time
d28 4
a31 8
   * ChangePassword is for users who _can_ remember their password and want to
     change it
   * ResetPassword is for users who _cannot_ remember their password; a system
     generated password is e-mailed to them
   * BulkResetPassword if for administrators who want to reset many passwords
     at once
   * ChangeEmailAddress changes the hidden email address stored in the password
     file
d36 3
a38 3
   * Rename the user's TWiki homepage in the %MAINWEB% web, such as
     from =JaneSmith= to =JaneMiller=.
      * Fix backlinks in the %MAINWEB% web only
d40 2
a41 4
   * Edit the [[%MAINWEB%.TWikiUsers]] topic and move the user's entry so
     that the list is in proper alphabetical order.
   * Recreate the old topic with a pointer to the new topic, so that links
     in other webs work properly. Example content:%BR%
d45 3
a47 4
   * The login name needs to be changed in the authentication server (e.g.
     Active Directory)
   * In TWiki's [[%MAINWEB%.TWikiUsers]] topic, fix the mapping from
     login name to WikiName:%BR%
d56 7
a62 18
   1 If you are using a =.htpasswd= file, edit the =.htpasswd= file to
     delete the line starting =fred:=
      * *Warning:* Do *not* use the Apache =htpasswd= program with
        =.htpasswd= files generated by TWiki! =htpasswd= wipes out email
        addresses that TWiki plants in the info fields of this file.
   2 Remove the =FredQuimby - fred= line from the <nop>%MAINWEB%.TWikiUsers
     topic
   3 Remove =FredQuimby= from all groups and from all the
      =ALLOWWEB/ALLOWTOPIC...= declarations, if any.%BR% __Note:__ If you
      fail to do this you risk creating a security hole, as the next user to
      register with the wikiname Fred<nop>Quimby will inherit the old
      Fred<nop>Quimby's permissions.
   4 _[optional]_ Delete their user topic %MAINWEB%.<nop>FredQuimby
     (including attachments, if any.)

__Note:__ Consider leaving the user topic file in place so their past signatures and revision author entries don't end up looking like AnUncreatedTopic.
If you want to make it clear the user is no longer around, replace the topic content with a note to that effect.
The existence of the <nop>UserName topic should also prevent that user name from being re-used, sealing the potential security hole regarding inherited permissions..
d65 1
d67 1
d72 1
a72 2
As these are TWikiTemplates, they can be customized and selected using the SKIN path setting.
Because there are default tmpl files in the =templates= dir, this cannot use Template topics.
d74 1
a74 2
These template files have a specific format that matches the raw format of emails sent via SMTP,
so be careful and test your changes. It is easiest to start by copying the default templates:
d82 1
a82 1
then add =myskin= to the beginning of the =SKIN= setting in %MAINWEB%.TWikiPreferences.
d86 1
a86 2
To make it possible for TWikiUsers to modify the email contents, you could use a parameterized =%<nop>INCLUDE%=
statement in your customized version. eg:
a102 1
   * __note the use of %<nop>WIKINAME%, %<nop>FIRSTLASTNAME%, %<nop>EMAILADDRESS% passed in from the INCLUDE so that the topic below is similar to the original template__
d104 3
a106 1
and then create a topic %NOP%%MAINWEB%.RegisterNotifyEmail:
a118 1

d126 1
a126 1
%META:PREFERENCE{name="ALLOWTOPICCHANGE" title="ALLOWTOPICCHANGE" type="Set" value="Main.TWikiAdminGroup"}%
d128 2
a129 1
   * __remember to secure the topic appropriately to prevent attackers from getting emailed sensitive passwords.__
@


1.6
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1158277691" format="1.1" version="6"}%
d84 70
a153 1
__Note:__ Consider leaving the user topic file in place so their past signatures and revision author entries don't end up looking like AnUncreatedTopic. If you want to make it clear the user is no longer around, replace the topic content with a note to that effect. The existance of the <nop>UserName topic should also prevent that user name from being re-used, sealing the potential security hole regarding inherited permissions..
@


1.5
log
@buildrelease
@
text
@d1 1
a1 2
%META:TOPICINFO{author="TWikiContributor" date="1158277691" format="1.1" version="5"}%
%TOC%
d3 1
a3 1
---# Manage Users
d7 5
d14 3
a16 2
   * TWikiUserAuthentication describes options of user authentication
   * TWikiAccessControl describes how to define groups and how to restrict access to content
d20 2
a21 1
It is not necessary to have user home pages in the TWiki system for Authentication to work - see TWikiUserAuthentication for details.
d23 6
a28 3
   * TWikiRegistration is for users to fill out a form
   * %TWIKIWEB%.NewUserTemplate can be changed to customize user home pages, it can optionally use the %MAINWEB%.UserForm to define user fields as meta data
   * BulkRegistration is for administrators to use to set up one or more accounts: either from a table or from an external file
d32 10
a41 3
   * ChangePassword is for users who can remember their password and want to change it
   * ResetPassword is for users who cannot remember their password; a system generated password is e-mailed to them
   * BulkResetPassword if for administrators who want to reset many passwords at once
d46 2
a47 1
   * Rename the user's TWiki homepage in the %MAINWEB% web, such as from =JaneSmith= to =JaneMiller=.
d50 4
a53 2
   * Edit the [[%MAINWEB%.TWikiUsers]] topic and move the user's entry so that the list is in proper alphabetical order.
   * Recreate the old topic with a pointer to the new topic, so that links in other webs work properly. Example content:%BR%
d57 5
a61 3
   * The login name needs to be changed in the directory server, such as AD or LDAP
   * In TWiki's [[%MAINWEB%.TWikiUsers]] topic, fix the mapping from login name to WikiName such as from:%BR%
     =&nbsp;  * !JohnSmith - john - 13 Sep 2006= %BR%
d63 1
a63 1
     =&nbsp;  * !JohnSmith - jsmith - 13 Sep 2006=
d69 14
a82 5
   1 If you are using a =.htpasswd= file, edit the =.htpasswd= file to delete the line starting =fred:=
      * *Warning:* Do *not* use the Apache =htpasswd= program with =.htpasswd= files generated by TWiki! =htpasswd= wipes out email addresses that TWiki plants in the info fields of this file.
   2 Remove the =FredQuimby - fred= line from the <nop>%MAINWEB%.TWikiUsers topic
   3 Remove =FredQuimby= from all groups and from all the =ALLOWWEB/ALLOWTOPIC...= declarations, if any.%BR% __Note:__ If you fail to do this you risk creating a security hole, as the next user to register with the wikiname Fred<nop>Quimby will inherit the old Fred<nop>Quimby's permissions.
   4 _[optional]_ Delete their user topic %MAINWEB%.<nop>FredQuimby (including attachments, if any.)
d84 1
a84 1
__Note:__ Consider leaving the user topic file in place so their past signatures and revision author entries don't end up looking like AnUncreatedTopic. If you want to make it clear the user is no longer with the organization or has been banished, replace the topic content with a note to that effect. The existance of the <nop>UserName topic should also prevent that user name from being re-used, sealing the potential security hole regarding inherited permissions..
@


1.4
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1111929255" format="1.0" version="4"}%
d27 17
d52 1
a52 1
   4 _[optional]_ Delete their user topic %MAINWEB%.<nop>FredQuimby.
@


1.3
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1111929255" format="1.0" version="3"}%
d32 1
@


1.2
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1111929255" format="1.0" version="2"}%
d10 2
a11 2
	* TWikiUserAuthentication describes options of user authentication
	* TWikiAccessControl describes how to define groups and how to restrict access to content
d17 3
a19 3
	* TWikiRegistration is for users to fill out a form
	* %TWIKIWEB%.NewUserTemplate can be changed to customize user home pages, it can optionally use the %MAINWEB%.UserForm to define user fields as meta data
	* BulkRegistration is for administrators to use to set up one or more accounts: either from a table or from an external file
d23 3
a25 3
	* ChangePassword is for users who can remember their password and want to change it
	* ResetPassword is for users who cannot remember their password; a system generated password is e-mailed to them
	* BulkResetPassword if for administrators who want to reset many passwords at once
d31 4
a34 4
	1 If you are using a =.htpasswd= file, edit the =.htpasswd= file to delete the line starting =fred:=
	2 Remove the =FredQuimby - fred= line from the <nop>%MAINWEB%.TWikiUsers topic
	3 Remove =FredQuimby= from all groups and from all the =ALLOWWEB/ALLOWTOPIC...= declarations, if any.%BR% __Note:__ If you fail to do this you risk creating a security hole, as the next user to register with the wikiname Fred<nop>Quimby will inherit the old Fred<nop>Quimby's permissions.
	4 _[optional]_ Delete their user topic %MAINWEB%.<nop>FredQuimby.
@


1.1
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="PeterThoeny" date="1092557660" format="1.0" version="1.1"}%
d5 1
d15 2
d18 2
a19 1
	* NewUserTemplate can be changed to customize user home pages
d23 3
a25 3
	* ChangePassword is for users who remember their password
	* ResetPassword is for users who do _not_ remember their password; they are asked to send a request to the site administrator to install a new password
	* InstallPassword is for the site administrator to install a password
d29 1
a29 6
To remove a user account:

	1 Edit the =data/.htpasswd= file to delete their entry (only applies if you are using a .htpasswd file)
	2 Remove the =FredQuimby= line from the <nop>%MAINWEB%.TWikiUsers topic
	3 Remove user from all groups and from all the =ALLOWWEB/ALLOWTOPIC...= declarations, if any.%BR% __Note:__ Otherwise this is a security hole as the first one to re-register with this name will be granted the permissions of the previous user.
	4 _[optional]_ Remove their topic files: =data/%MAINWEB%/FredQuimby.txt= and =data/%MAINWEB%/FredQuimby.txt,v=
d31 4
a34 1
__Note:__ Consider leaving the user topic file in place so their past signatures and revision author entries don't end up looking like AnUncreatedTopic. If you want to make it clear the user is inactive on your site (e.g. %MAINWEB%.PeterThoeny) or has been banished add a note to that effect and write protect the page (TWikiAccessControl). The existance of the <nop>UserName topic prevent that user name from being re-used.
d36 1
a36 2
-- TWiki:Main.MattWilkie - 21 Jul 2003 %BR%
-- TWiki:Main.PeterThoeny - 15 Aug 2004
d38 1
@
