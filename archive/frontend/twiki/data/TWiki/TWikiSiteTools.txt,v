head	1.20;
access;
symbols;
locks; strict;
comment	@# @;


1.20
date	2013.10.13.10.29.54;	author TWikiContributor;	state Exp;
branches;
next	1.19;

1.19
date	2012.11.29.20.42.53;	author TWikiContributor;	state Exp;
branches;
next	1.18;

1.18
date	2011.08.13.21.43.22;	author TWikiContributor;	state Exp;
branches;
next	1.17;

1.17
date	2011.04.18.04.11.50;	author TWikiContributor;	state Exp;
branches;
next	1.16;

1.16
date	2010.08.20.22.23.26;	author TWikiContributor;	state Exp;
branches;
next	1.15;

1.15
date	2010.05.29.14.44.26;	author TWikiContributor;	state Exp;
branches;
next	1.14;

1.14
date	2008.01.22.03.21.27;	author TWikiContributor;	state Exp;
branches;
next	1.13;

1.13
date	2007.01.16.04.11.58;	author TWikiContributor;	state Exp;
branches;
next	1.12;

1.12
date	2006.06.25.16.26.27;	author TWikiContributor;	state Exp;
branches;
next	1.11;

1.11
date	2006.04.01.05.55.15;	author TWikiContributor;	state Exp;
branches;
next	1.10;

1.10
date	2006.02.01.12.01.19;	author TWikiContributor;	state Exp;
branches;
next	1.9;

1.9
date	2004.08.28.07.22.32;	author PeterThoeny;	state Exp;
branches;
next	1.8;

1.8
date	2004.04.25.00.10.27;	author PeterThoeny;	state Exp;
branches;
next	1.7;

1.7
date	2003.01.30.07.43.00;	author PeterThoeny;	state Exp;
branches;
next	1.6;

1.6
date	2002.05.04.16.10.36;	author MikeMannix;	state Exp;
branches;
next	1.5;

1.5
date	2001.12.04.07.22.21;	author MikeMannix;	state Exp;
branches;
next	1.4;

1.4
date	2001.12.02.10.22.00;	author MikeMannix;	state Exp;
branches;
next	1.3;

1.3
date	2001.12.01.10.03.44;	author MikeMannix;	state Exp;
branches;
next	1.2;

1.2
date	2001.11.30.09.53.00;	author MikeMannix;	state Exp;
branches;
next	1.1;

1.1
date	2001.11.23.11.34.45;	author MikeMannix;	state Exp;
branches;
next	;


desc
@none
@


1.20
log
@buildrelease
@
text
@%META:TOPICINFO{author="TWikiContributor" date="1381660194" format="1.1" version="20"}%
%STARTINCLUDE%
---+ TWiki Site Tools

_Utilities for searching, navigation, and monitoring site activity_

TWiki Site Tools include utilities for navigating, searching and keeping up with site activity. Preferences can be configured by web or site-wide. You are currently in the *%SYSTEMWEB%* web. In particular, TWiki provides two highly configurable, automated site monitoring tools, *<nop>WebNotify*, to e-mail alerts when topics are edited, and *<nop>WebStatistics*, to generate detailed activity reports.

%TOC%

#WebNotify
---++ <nop>WebNotify - recent changes alert

Each TWiki web has an automatic e-mail alert service that sends a list of recent changes on a preset schedule, like once a day. Users can subscribe and unsubscribe using %NOTIFYTOPIC% in each web. The Perl script =mailnotify= is called by a background process at regular intervals. The script sends an automated e-mail to subscribed users if topics were changed in a web since the script was last run.

   * You can create a WebNotify link using TWikiVariables with ==%<nop>NOTIFYTOPIC%==

%INCLUDE{"WebChangesAlert"}%

You can also use =%<nop>USERSWEB%= instead of =Main=, but this is not necessary even if you have renamed the main web by configuring ={MainWebName}= in [[%SCRIPTURLPATH{"configure"}%][configure]].

#WebSearch
---++ <nop>WebSearch - search TWiki site

WebSearch is an extremely fast and flexible search facility, part of the core TWiki feature set. WebSearchAdvanced offers more options, including:
   * topic title or full-text search
   * regular expressions
   * search within web or site-wide
   * index-style A-Z alphabetical listing sorted topic title
   * many more

See also: SearchHelp for help; TWikiVariables and FormattedSearch for including hard-coded searches in text.

#WebChanges
---++ <nop>WebChanges - what's new

To check for the most recently edited topics while on-site, use the WebChanges link, usually located in the toolbar. It lists the most recently modified topics, newest first, along with the first couple of lines of the page content.

This is simply a preset =SEARCH=. The number of topics listed by the =limit= parameter.:
<blockquote>
<pre>
%<nop>SEARCH{
 ".*"
 web="%INCLUDINGWEB%"
 type="regex"
 nosearch="on"
 sort="modified"
 reverse="on" 
 limit="50"
}%
</pre>
</blockquote>

#WebRssAndAtom
---++ <nop>WebRss and <nop>WebAtom - news feeds on recent changes

You can point your news reader at WebRss and WebAtom to find out what is new in a TWiki web. WebRssBase and WebAtomBase have the details. Like WebChanges, this is based on a =%<nop>SEARCH{}%=.

#WebIndex
---++ <nop>WebIndex - list of topics

WebIndex lists all web topics in alphabetical order, with the first couple of lines of text. This is simply a preset =SEARCH=:
<blockquote>
<pre>
%<nop>SEARCH{
 "\.*"
 scope="topic"
 type="regex"
 nosearch="on"
}%
</pre>
</blockquote>

#WebStatistics
---++ <nop>WebStatistics - site statistics

You can generate a listing manually, or on an automated schedule, of visits to individual pages, on a per web basis. Compiled as a running total on a monthly basis. Includes totals for Topic Views, Topic Saves, Attachment Uploads, Most Popular Topics with number of views, and Top Contributors showing total of saves and attachment uploads. Previous months are saved.

%T% You can create a WebStatistics link using TWikiVariables with ==%<nop>STATISTICSTOPIC%==

TWiki also generates overall site usage statistics in [[%USERSWEB%.SiteStatistics]] (do not create that page, it is created automatically based on SiteStatisticsTemplate). On a monthly basis, the following items are recorded using system data and TWiki log data across all webs: Number of webs, number of topics, number of attachments, number of topic views, number of topic updates, number of files uploads, data size, pub size, disk use, number of users, number of groups, number of plugins installed compared to total number of plugins available, and the 10 top contributors.

---+++ Configuring for automatic operation

   * You can automatically generate usage statistics for the whole site and all webs. To enable this:
      * Make sure variable ={Log}{view}=, ={Log}{save}= and ={Log}{upload}= are set in [[%SCRIPTURLPATH{"configure"}%][configure]]. This will generate log file entries (see below).
      * Call the =twiki/bin/statistics= script from a cron job - once a day is recommended. This will update the %USERSWEB%.SiteStatistics and the WebStatistics topics in all webs.
      * __Attention:__ The script must run as the same user as the CGI scripts are running, such as user =nobody= or =www-data=. Example crontab entry: %BR% =0 0 * * * (cd /path/to/twiki/bin; ./statistics &gt;/dev/null 2&gt;&amp;1)=
      * There is a workaround in case you can't run the script as user =nobody= : Run the utility =twiki/tools/geturl.pl= in your cron job and specify the URL of the =twiki/bin/statistics= script as a parameter. Example: %BR% =0 0 * * * (cd /path/to/twiki/tools; ./geturl.pl mydomain.com /urlpath/to/twiki/bin/statistics &gt;/dev/null 2&gt;&amp;1)= 
      * __NOTE:__ =geturl.pl= will do a TWiki CGI request as the <nop>TWikiGuest user, so if you use this workaround, the !WebStatistics topics you are updating will have to be writable by <nop>TWikiGuest.

When running from the command line or a cron job, you can pass parameters to the script like this:
<verbatim>
cd twiki/bin; ./statistics -logdate 2011-05 -webs TWiki,Sandbox
</verbatim>

---+++ Generating statistics manually by URL

   * If ={Stats}{DisableInvocationFromBrowser}= config parameter is false (it's %IF{"{Stats}{DisableInvocationFromBrowser}" then="true" else="false"}% in this installation), the =twiki/bin/statistics= script can also be executed as a CGI script - just enter the URL in your browser. Examples:
      * Update current month for all webs you have access to: %BR% =%SCRIPTURLPATH{statistics}%=
      * Update current month for %USERSWEB% web only: %BR% =%SCRIPTURLPATH{statistics}%/%USERSWEB%=
      * Update %SERVERTIME{$month $year}% for %USERSWEB% web: %BR% =%SCRIPTURLPATH{statistics}%/%USERSWEB%?logdate=%SERVERTIME{$year-$mo}%=
      * Update %SERVERTIME{$month $year}% for the !ProjectX, !ProjectY and !ProjectZ webs: %BR% =%SCRIPTURLPATH{statistics}%?logdate=%SERVERTIME{$year-$mo}%;webs=ProjectX,ProjectY,ProjectZ=

#MaxNoOfItemsInColumns
---+++ The maximum number of items in columns

There are columns having a list of items.
The maximum number of items listed in a column is specified as follows.

| *Topic* | *Column and part* | *Configuration parameter* | *Default* |
| <nop>%STATISTICSTOPIC% of webs | [[#AffiliationBreakdown][Affiliation breakdown]] in "Topic views", "Topic saves", and "File uploads" columns | ={Stats}{TopAffiliation}= |  10 |
|^| "Most popular topic views" column | ={Stats}{TopViews}= |  10 |
|^| "Top viewers" column | ={Stats}{TopViewers}= |  10 |
|^| "Top contributors for tpoic save and uploads" column | ={Stats}{TopContrib}= |  10 |
| <nop>%USERSWEB%.%SITESTATISTICSTOPIC% | The list of webs viewed the most number of times in the "Webs Viewed" column | ={Stats}{SiteTopViews}= |  0 |
|^| The list of webs updated the most number of times in the "Webs Updated" column | ={Stats}{SiteTopUpdates}= |  0 |
|^| [[#AffiliationBreakdown][Affiliation breakdown]] in "Topic Views", "Topic Saves", and "File Uploads" columns | ={Stats}{SiteTopAffiliation}= |  10 |
|^| "Top Viewers" column | ={Stats}{SiteTopViewers}= |  10 |
|^| "Top Contributors" column | ={Stats}{SiteTopContrib}= |  10 |

#AffiliationBreakdown
---+++ Affiliation breakdown of views, saves, and uploads

If you run TWiki in an orgaization, you may want to see division breakdown of topic views, topic saves, and file uploads - in a month, how many topic views are there from the R&D division, the Sales division, etc.

You can have affiliation breakdown at the Topic views, Topic saves, and File uploads columns of <nop>%STATISTICSTOPIC% and <nop>%SITESTATISTICSTOPIC% as follows.

| *Month:* | *Topic <br /> views:* | *Topic <br /> saves:* | *File <br /> uploads:* | *Most popular <br /> topic views:* | *Top viewerss:* | *Top contributors for <br /> topic save and uploads:* |
| <!--statDate--> | <!--statViews--> | <!--statSaves--> | <!--statUploads--> | <!--statTopViews--> | <!--statTopViewers--> | <!--statTopContributors--> |
| 2013-08 | 10325<br />(150 unique users)<br />6921 R&D<br />1736 Operation<br />&nbsp;&nbsp;927 Sales<br />&nbsp;&nbsp;623 Management<br />&nbsp;&nbsp;&nbsp;&nbsp;98 Unknown | 7<br />(3 unique users)<br />7 R&D | 3<br />(1 unique users)<br />3 R&D | 6941 <nop>WebHome<br />&nbsp;&nbsp;872 <nop>WebSearch<br />&nbsp;&nbsp;848 <nop>ToolSiteMap<br />&nbsp;&nbsp;376 <nop>ToolDashboard<br />&nbsp;&nbsp;223 <nop>WebSearchAdvanced<br />&nbsp;&nbsp;185 <nop>ContRequests<br />&nbsp;&nbsp;127 <nop>WebTopicList<br />&nbsp;&nbsp;&nbsp;&nbsp;89 <nop>ToolPersonalWebs<br />&nbsp;&nbsp;&nbsp;&nbsp;72 <nop>ToolMasquerading<br />&nbsp;&nbsp;&nbsp;&nbsp;70 <nop>TWikiAdminUser | 525&nbsp;<nop>PeterThoeny<br />&nbsp;&nbsp;49 <nop>MahiroAndo<br />&nbsp;&nbsp;&nbsp;&nbsp;9&nbsp;<nop>HdeyoImazu | 5 <nop>HdeyoImazu<br />1 <nop>MahiroAndo<br />1 <nop>PeterThoeny |

Affiliation breakdown is turned off by default.
To turn it on, you need to do two things.

   1. Provide =getAffiliation($cUID)= object method in the current user mapping handler. It's supposed return the affiliation (division, department, etc.) of the =$cUID=. If the affiliation is unknown, it returns =undef=.
   1. Set ={Stats}{Breakdown}= configuration papameter true by putting the following line in =lib/LocalSite.cfg=.
   <verbatim>
$TWiki::cfg{Stats}{Breakdown} = 1;
</verbatim>

#ExcludedWebRegex
---+++ Excluding some webs from <nop>%STATISTICSTOPIC% update

You can exclude webs from <nop>%STATISTICSTOPIC% update by specifying ={Stats}{ExcludedWebRegex}= config parameter as follows.
<verbatim>
$TWiki::cfg{Stats}{ExcludedWebRegex} = '^(Trash(x\d+x)?\d*|Sandbox\d*)\b';
</verbatim>

You may wonder when this is needed.

There are webs not worth updating <nop>%STATISTICSTOPIC% such as the Trash web. When a web is deleted, it becomes a subweb of the Trash web. By default, not only the Trash web but also subwebs of the Trash web are subject to <nop>%STATISTICSTOPIC% update.

On a large TWiki site, you may have dozens of Trash webs - you may [[LargeSite#RotateTrashSandbox][rotate Trash webs]] and you may be UsingMultipleDisks (each disk requires its own Trash - e.g. !Trashx1x and !Trashx2x). If you have Trash, Trash1, ..., Trash10 for rotation and if you use 3 disks for TWiki,  you end up having 33 Trashes.

#WebStatisticsYYYY
---+++ Preventing <nop>%STATISTICSTOPIC% and <nop>%SITESTATISTICSTOPIC% from growing big

<nop>%STATISTICSTOPIC% topics grow in size every month. By default you have only 10 lines per month, but you may have a lot more. If so, in 5 years, <nop>%STATISTICSTOPIC% gets really big. Besides, if you run the =statistics= script every day, you increase the revision of each !WebStatistics by one every day. If a topic has hundreds of revision, some operations such as getting the original creator of the topic takes long.

There is an option to prevent the boundless growth of <nop>%STATISTICSTOPIC%.
If you set =$TWiki::cfg{Stats}{TopicPerYear}= true, the =statistics= script writes the result to <nop>%STATISTICSTOPIC%YYYY where YYYY is the current year (e.g. <nop>%STATISTICSTOPIC%%GMTIME{$year}%) instead of <nop>%STATISTICSTOPIC%. The parameter is false by default.
   * If TWiki:Plugins/RedirectPlugin is installed, viewing <nop>%STATISTICSTOPIC% causes redirection to the <nop>%STATISTICSTOPIC%YYYY of the year. Otherwise, <nop>%STATISTICSTOPIC% shows links to <nop>%STATISTICSTOPIC%YYYY topics.
   * After you change ={Stats}{TopicPerYear}= to true but before you run the =statistics= script, you should run =twiki/tools/switch2yearlystats= to rename <nop>%STATISTICSTOPIC% of all webs to <nop>%STATISTICSTOPIC%YYYY of the year. In case <nop>%STATISTICSTOPIC% is not in the same format as its current template, it's renamed to <nop>%STATISTICSTOPIC%0000.

The description above is applied to <nop>%USERSWEB%.%SITESTATISTICSTOPIC% as well.
If ={Stats}{TopicPerYear}= is true:
   * The site-wide statistics are written to <nop>%USERSWEB%.%SITESTATISTICSTOPIC%YYYY of the year instead of <nop>%USERSWEB%.%SITESTATISTICSTOPIC%
   * <nop>%USERSWEB%.%SITESTATISTICSTOPIC% shows the list of <nop>%USERSWEB%.%SITESTATISTICSTOPIC%YYYY topics or redirects to the latest one depending on the availability of !RedirectPlugin.
   * =twiki/tools/switch2yearlystats= renames <nop>%USERSWEB%.%SITESTATISTICSTOPIC% to <nop>%USERSWEB%.%SITESTATISTICSTOPIC%YYYY of the year or <nop>%USERSWEB%.%SITESTATISTICSTOPIC%0000.

#UpgradeFromPre6x0
---+++ Upgrade from pre 6.0

---++++ Statistics topic conversion

There are several changes made to <nop>%STATISTICSTOPIC% and <nop>%SITESTATISTICSTOPIC%.
If existing statistics topics are kept as they are, topic update by the =statistics= script doesn't work well.
By running =tools/convert_stats_twiki6= after upgrade, all statistics topics are converted for the current version of =statistics=.

---++++ Top Contributors on <nop>%SITESTATISTICSTOPIC%

The number of contributors listed on the "Top Contributors" column on <nop>%SITESTATISTICSTOPIC% is specified by ={Stats}{SiteTopContrib}=.
Prior to TWiki 6.0, it was specified by ={Stats}{TopContrib}=.
If you have a custom ={Stats}{TopContrib}= value, you need to set ={Stats}{SiteTopContrib}= as well. Otherwise, the number of "Top Contributors" on <nop>%SITESTATISTICSTOPIC% becomes the default value, which is 10.

#LogFiles
---++ Log Files

TWiki generates monthly log files which are used by the statistics script
   * The log file is defined by the *{LogFileName}* setting in [[%SCRIPTURLPATH{"configure"}%][configure]]
   * The file name is =log&lt;year&gt;&lt;month&gt;.txt=
   * Example path name: =twiki/logs/log%SERVERTIME{$year$mo}%.txt=
   * Each access gets logged as: %BR%
     =| &lt;time in GMT&gt; | &lt;wikiusername&gt; | &lt;action&gt; | &lt;web&gt;.&lt;topic&gt; | &lt;extra info&gt; | &lt;IP address&gt; |=
   * Example log entry: %BR%
     =| %SERVERTIME{$day $mon $year - $hour:$min}% | <nop>%USERSWEB%.TWikiGuest | view | <nop>%SYSTEMWEB%.WebRss |  | 66.124.232.02 |=
   * Actions are logged if enabled in [[%SCRIPTURLPATH{"configure"}%][configure]] by the *{Log}{<i>action</i>}* flags
   * Logged actions:
     | *Script* | *Action name* | *Extra info* |
     | attach | =attach= | when viewing attach screen of previous uploaded attachment: =filename= |
     | changes | =changes= |  |
     | edit | =edit= | when editing non-existing topic: =(not exist)= |
     | login, logon,%BR% attach, edit,%BR% register, rest,%BR% view, vewfile | =sudologin=, %BR% =sudologout= | Login name of administrator user who is logging in or out |
     | manage | =changepasswd= | Login name of user who's password is changed |
     | mdrepo | =mdrepo= | operation and its arguments |
     | rdiff | =rdiff= | higher and lower revision numbers: =4 3= |
     | register | =regstart= | !WikiUserName, e-Mail address, LoginName: =user attempts to register= |
     | register | =register= | E-mail address: =user successfully registers= |
     | register | =bulkregister= | !WikiUserName of new, e-mail address, admin ID |
     | rename | =rename= | when moving topic: =moved to !Newweb.NewTopic= |
     | rename | =renameweb= | when renaming a web: =moved to !Newweb= |
     | rename | =move= | when moving attachment: =Attachment filename moved to !Newweb.NewTopic= |
     | resetpasswd | =resetpasswd= | Login name of user who's password is reset |
     | save | =save= | when replacing existing revision: =repRev 3= %BR% when user checks the minor changes box: =dontNotify= %BR% when user changes attributes to an exising attachment: =filename.ext= |
     | save | =cmd= | special admin parameter used when saving |
     | search | =search= | search string |
     | upload | =upload= | filename |
     | view | =view= | when viewing non-existing topic: =(not exist)= %BR% when viewing previous topic revision: =r3= |
     | viewfile | =viewfile= | Attachment name and revision: =File.txt, r3= |

#ConfigureEmail
---++ E-mail

---+++ Configuring outgoing mail

Outgoing mail is required for TWikiRegistration and for [[#WebNotify][recent changes alert]].

TWiki will use the ==Net::SMTP== module if it is installed on your system. Set this with the =={SMTP}{MAILHOST}== setting in [[%SCRIPTURLPATH{"configure"}%][configure]].

   * %T% You can define a separate =={SMTP}{SENDERHOST}== configure setting to set the mail sender host - some SMTP installations require this.
   * %X% If you are using SELinux ([[Wikipedia:Security-Enhanced_Linux][Security-Enhanced Linux]]) you might need to configure it to allow TWiki to send e-mails:
     %BR% =$ sudo setsebool -P httpd_can_sendmail on=
     %BR% =$ sudo setsebool -P httpd_can_network_connect on=

You can use an external mail program, such as ==sendmail==, if the =Net::SMTP= module is not installed or not functioning properly. Set the program path in =={MailProgram}== and set =={SMTP}{MAILHOST}== to an empty value in [[%SCRIPTURLPATH{"configure"}%][configure]].

The notify e-mail uses the default =changes.tmpl= template, or a skin if activated in the TWikiPreferences.

mailnotify also relies on two hidden files in each =twiki/data/Web= directory: =.changes= and =.mailnotify.= Make sure both are writable by your web server process. =.changes= contains a list of changes; go ahead and make this empty. =.mailnotify= contains a timestamp of the last time notification was done.

---+++ Setting the automatic e-mail schedule

*For Unix platforms:* Edit the =cron= table so that =mailnotify= is called in an interval of your choice. Please consult =man crontab= of how to modify the table that schedules program execution at certain intervals. Example:
<pre>
% crontab -e
0 1 * * * (cd /path/to/twiki; perl -I bin tools/mailnotify -q)
</pre>
The above line will run mailnotify nightly at 01:00. The =-q= switch suppresses all normal output. Details at MailerContrib.

*For ISP installations:* Many ISPs don't allow hosted accounts direct cron access, as it's often used for things that can heavily load the server. Workaround scripts are available.

*On Windows:* You can use a scheduled task if you have administrative privileges. TWiki:Codev/CronTabWin is a free scheduler for Windows.

---++ Site Permissions

   * TWikiAccessControl describes how to restrict read and write access to topics and webs, by users and groups
%IF{"{NoInAllPublicWebs}" else="   * SitePermissions lists the permissions settings of the webs on this TWiki site"}%

---++ Backup and Restore

TWiki has a solution to backup, restore and upgrade TWiki sites. It can be used via browser and on the command line. The BackupRestorePlugin is pre-installed in TWiki-5.1 and later releases; it can be installed in older TWiki releases as low as TWiki-2001-09-01 (Athens Release) to easily create a backup that can be restored on a new TWiki release. This offers an easy upgrade path for TWiki. See also TWikiUpgradeGuide.

---++ Help with crontab

The crontab command is used to schedule commands to be executed periodically.

   * Wikipedia.org:Crontab - crontab documentation
   * [[http://www.kalab.com/freeware/pycron/pycron.htm][pycron]] - crontab for Windows

__Related Topics:__ AdminDocumentationCategory, AdminToolsCategory

%STOPINCLUDE%
-- __Contributors:__ TWiki:Main.MikeMannix, TWiki:Main.PeterThoeny, TWiki:Main.CrawfordCurrie, TWiki:Main.KennethLavrsen, TWiki:Main.SvenDowideit
@


1.19
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1354221773" format="1.1" version="19"}%
d47 1
a47 1
 order="modified"
d99 1
a99 1
   * The =twiki/bin/statistics= script can also be executed as a CGI script - just enter the URL in your browser. Examples:
d105 82
d206 1
d258 1
a258 1
   * SitePermissions lists the permissions settings of the webs on this TWiki site
@


1.18
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1313271802" format="1.1" version="18"}%
d42 9
a50 2
%<nop>SEARCH{ ".*" web="%INCLUDINGWEB%" type="regex" nosearch="on" order="modified"%BR% reverse="on" 
limit="50" }%
d65 6
a70 1
%<nop>SEARCH{ "\.*" scope="topic" type="regex" nosearch="on" }%
d113 1
a113 1
     =| &lt;time&gt; | &lt;wikiusername&gt; | &lt;action&gt; | &lt;web&gt;.&lt;topic&gt; | &lt;extra info&gt; | &lt;IP address&gt; |=
d115 1
a115 1
     =| %SERVERTIME{$day $mon $year - $hour:$min}% | %USERSWEB%.TWikiGuest | view | %SYSTEMWEB%.WebRss |  | 66.124.232.02 |=
d146 8
a153 1
TWiki will use the ==Net::SMTP== module if it is installed on your system. Set this with the ==SMTPMAILHOST== variable in TWikiPreferences.
a158 6
You can use an external mail program, such as ==sendmail==, if the =Net::SMTP= module is not installed. Set the program path in =={MailProgram}== in [[%SCRIPTURLPATH{"configure"}%][configure]].

   * %H% Net::SMTP can be easily disabled (if there is an installation error) by setting ==SMTPMAILHOST== in TWikiPreferences to an empty value.

   * %T% You can set a separate ==SMTPSENDERHOST== variable to define the mail sender host (some SMTP installations require this).

@


1.17
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1303099910" format="1.1" version="17"}%
d67 3
a69 1
   * You can create a WebStatistics link using TWikiVariables with ==%<nop>STATISTICSTOPIC%==
d73 1
a73 1
   * You can automatically generate usage statistics for all webs. To enable this:
d75 2
a76 3
      * The WebStatistics topic must be present in all webs where you want to have statistics. You can use the topic in the Main web as a template.
      * Call the =twiki/bin/statistics= script from a cron job, once a day is recommended. This will update the WebStatistics topics in all webs.
      * __Attention:__ The script must run as the same user as the CGI scripts are running, which is user =nobody= on many systems. Example crontab entry: %BR% =0 0 * * * (cd /path/to/twiki/bin; ./statistics &gt;/dev/null 2&gt;&amp;1)=
d82 1
a82 1
./statistics -logdate 200605 -webs TWiki,Sandbox
d87 1
a87 1
   * The =twiki/bin/statistics= script can also be executed as a CGI script, just enter the URL in your browser. Examples:
d90 2
a91 2
      * Update %SERVERTIME{$month $year}% for %USERSWEB% web: %BR% =%SCRIPTURLPATH{statistics}%/%USERSWEB%?logdate=%SERVERTIME{$year$mo}%=
      * Update %SERVERTIME{$month $year}% for the !ProjectX, !ProjectY and !ProjectZ webs: %BR% =%SCRIPTURLPATH{statistics}%?logdate=%SERVERTIME{$year$mo}%;webs=Project<nop>X,Project<nop>Y,Project<nop>Z=
d164 4
@


1.16
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1282343006" format="1.1" version="16"}%
d72 1
a72 1
      * Make sure variable *{Log}{view}*, *{Log}{save}* and *{Log}{upload} in are set in [[%SCRIPTURLPATH{"configure"}%][configure]]. This will generate log file entries (see below).
@


1.15
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1273621160" format="1.1" version="15"}%
d150 1
a150 1
0 1 * * * (cd /path/to/twiki/bin; ./mailnotify -q)
d152 1
a152 1
The above line will run mailnotify nightly at 01:00. The =-q= switch suppresses all normal output.
@


1.14
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1177803014" format="1.1" version="14"}%
d109 2
d116 1
d118 1
d124 1
@


1.13
log
@buildrelease
@
text
@d1 1
a1 2
%META:TOPICINFO{author="TWikiContributor" date="1163619832" format="1.1" version="13"}%
%TOC%
d3 1
a3 1
---# TWiki Site Tools
d7 3
a9 1
TWiki Site Tools include utilities for navigating, searching and keeping up with site activity. Preferences can be configured by web or site-wide. You are currently in the *%TWIKIWEB%* web. In particular, TWiki provides two highly configurable, automated site monitoring tools, *<nop>WebNotify*, to e-mail alerts when topics are edited, and *<nop>WebStatistics*, to generate detailed activity reports.
d20 1
a20 1
You can also use =%<nop>MAINWEB%= instead of =Main=, but this is not necessary even if you have renamed the main web by configuring ={MainWebName}= in [[%SCRIPTURLPATH{"configure"}%][configure]].
d47 5
d76 2
a77 1
      * There is a workaround in case you can't run the script as user =nobody= : Run the utility =twiki/tools/geturl.pl= in your cron job and specify the URL of the =twiki/bin/statistics= script as a parameter. Example: %BR% =0 0 * * * (cd /path/to/twiki/tools; ./geturl.pl mydomain.com /urlpath/to/twiki/bin/statistics &gt;/dev/null 2&gt;&amp;1)=
d88 2
a89 2
      * Update current month for %MAINWEB% web only: %BR% =%SCRIPTURLPATH{statistics}%/%MAINWEB%=
      * Update %SERVERTIME{$month $year}% for %MAINWEB% web: %BR% =%SCRIPTURLPATH{statistics}%/%MAINWEB%?logdate=%SERVERTIME{$year$mo}%=
d102 1
a102 1
     =| %SERVERTIME{$day $mon $year - $hour:$min}% | %MAINWEB%.TWikiGuest | view | %TWIKIWEB%.WebRss |  | 66.124.232.02 |=
a114 2
     | passwd | =resetpasswd= | LoginName, WikiName, E-mail address, success code from addUserPassword |
     | passwd | =changepasswd= | LoginName, WikiName |
d145 1
a145 1
0 2 * * * (cd /path/to/twiki/bin; ./mailnotify -q)
d147 1
a147 1
The above line will run mailnotify nightly at 02:00. The =-q= switch suppresses all normal output.
d158 7
d167 2
@


1.12
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1121296496" format="1.1" version="12"}%
d39 1
a39 1
<blockquote style="background-color:#f5f5f5">
d41 2
a42 1
%<nop>SEARCH{ ".*" web="%INCLUDINGWEB%" regex="on" nosearch="on" order="modified"%BR% reverse="on" limit="50" }%
d50 1
a50 1
<blockquote style="background-color:#f5f5f5">
d52 1
a52 1
%<nop>SEARCH{ "\.*" scope="topic" regex="on" nosearch="on" }%
d70 1
a70 1
      * There is a workaround in case you can't run the script as user =nobody= : Run the utility =twiki/bin/geturl= in your cron job and specify the URL of the =twiki/bin/statistics= script as a parameter. Example: %BR% =0 0 * * * (cd /path/to/twiki/bin; ./geturl mydomain.com /urlpath/to/twiki/bin/statistics &gt;/dev/null 2&gt;&amp;1)=
d110 2
a111 1
     | save | =save= | when replacing existing revision: =repRev 3= %BR% when user checks the minor changes box: =dontNotify= |
@


1.11
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1121296496" format="1.1" version="11"}%
d71 5
d79 1
a79 1
      * Update current month for all webs: %BR% =%SCRIPTURLPATH{statistics}%=
d81 2
a82 1
      * Update January 2000 for %MAINWEB% web: %BR% =%SCRIPTURLPATH{statistics}%/%MAINWEB%?logdate=%SERVERTIME{$year$mo}%=
@


1.10
log
@buildrelease
@
text
@d1 1
a1 1
%META:TOPICINFO{author="TWikiContributor" date="1121296496" format="1.1" version="10"}%
d15 1
a15 1
	* You can create a WebNotify link using TWikiVariables with ==%<nop>NOTIFYTOPIC%==
d25 5
a29 5
	* topic title or full-text search
	* regular expressions
	* search within web or site-wide
	* index-style A-Z alphabetical listing sorted topic title
	* many more
d60 1
a60 1
	* You can create a WebStatistics link using TWikiVariables with ==%<nop>STATISTICSTOPIC%==
d64 6
a69 6
	* You can automatically generate usage statistics for all webs. To enable this:
		* Make sure variable *{Log}{view}*, *{Log}{save}* and *{Log}{upload} in are set in [[%SCRIPTURLPATH{"configure"}%][configure]]. This will generate log file entries (see below).
		* The WebStatistics topic must be present in all webs where you want to have statistics. You can use the topic in the Main web as a template.
		* Call the =twiki/bin/statistics= script from a cron job, once a day is recommended. This will update the WebStatistics topics in all webs.
		* __Attention:__ The script must run as the same user as the CGI scripts are running, which is user =nobody= on many systems. Example crontab entry: %BR% =0 0 * * * (cd /path/to/twiki/bin; ./statistics &gt;/dev/null 2&gt;&amp;1)=
		* There is a workaround in case you can't run the script as user =nobody= : Run the utility =twiki/bin/geturl= in your cron job and specify the URL of the =twiki/bin/statistics= script as a parameter. Example: %BR% =0 0 * * * (cd /path/to/twiki/bin; ./geturl mydomain.com /urlpath/to/twiki/bin/statistics &gt;/dev/null 2&gt;&amp;1)=
d73 4
a76 4
	* The =twiki/bin/statistics= script can also be executed as a CGI script, just enter the URL in your browser. Examples:
		* Update current month for all webs: %BR% =%SCRIPTURLPATH{statistics}%=
		* Update current month for %MAINWEB% web only: %BR% =%SCRIPTURLPATH{statistics}%/%MAINWEB%=
		* Update January 2000 for %MAINWEB% web: %BR% =%SCRIPTURLPATH{statistics}%/%MAINWEB%?logdate=%SERVERTIME{$year$mo}%=
d82 25
a106 25
	* The log file is defined by the *{LogFileName}* setting in [[%SCRIPTURLPATH{"configure"}%][configure]]
	* The file name is =log&lt;year&gt;&lt;month&gt;.txt=
	* Example path name: =twiki/logs/log%SERVERTIME{$year$mo}%.txt=
	* Each access gets logged as: %BR%
	  =| &lt;time&gt; | &lt;wikiusername&gt; | &lt;action&gt; | &lt;web&gt;.&lt;topic&gt; | &lt;extra info&gt; | &lt;IP address&gt; |=
	* Example log entry: %BR%
	  =| %SERVERTIME{$day $mon $year - $hour:$min}% | %MAINWEB%.TWikiGuest | view | %TWIKIWEB%.WebRss |  | 66.124.232.02 |=
	* Actions are logged if enabled in [[%SCRIPTURLPATH{"configure"}%][configure]] by the *{Log}{<i>action</i>}* flags
	* Logged actions:
	  | *Script* | *Action name* | *Extra info* |
	  | attach | =attach= | when viewing attach screen of previous uploaded attachment: =filename= |
	  | changes | =changes= |  |
	  | edit | =edit= | when editing non-existing topic: =(not exist)= |
	  | rdiff | =rdiff= | higher and lower revision numbers: =4 3= |
	  | register | =regstart= | !WikiUserName, e-Mail address, LoginName: =user attempts to register= |
	  | register | =register= | E-mail address: =user successfully registers= |
	  | register | =bulkregister= | !WikiUserName of new, e-mail address, admin ID |
	  | rename | =rename= | when moving topic: =moved to !Newweb.NewTopic= |
	  | rename | =move= | when moving attachment: =Attachment filename moved to !Newweb.NewTopic= |
	  | passwd | =resetpasswd= | LoginName, WikiName, E-mail address, success code from addUserPassword |
	  | passwd | =changepasswd= | LoginName, WikiName |
	  | save | =save= | when replacing existing revision: =repRev 3= %BR% when user checks the minor changes box: =dontNotify= |
	  | search | =search= | search string |
	  | upload | =upload= | filename |
	  | view | =view= | when viewing non-existing topic: =(not exist)= %BR% when viewing previous topic revision: =r3= |
d123 1
a123 1
	* %H% Net::SMTP can be easily disabled (if there is an installation error) by setting ==SMTPMAILHOST== in TWikiPreferences to an empty value.
d125 1
a125 1
	* %T% You can set a separate ==SMTPSENDERHOST== variable to define the mail sender host (some SMTP installations require this).
d142 2
a143 2
	* TWikiAccessControl describes how to restrict read and write access to topics and webs, by users and groups
	* SitePermissions lists the permissions settings of the webs on this TWiki site
@


1.9
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="PeterThoeny" date="1093677752" format="1.0" version="1.9"}%
d8 1
a8 1
TWikiSiteTools include utilities for navigating, searching and keeping up with site activity. Preferences can be configured by web or site-wide. You are currently in the *%TWIKIWEB%* web. In particular, TWiki provides two highly configurable, automated site monitoring tools, *<nop>WebNotify*, to email alerts when topics are edited, and *<nop>WebStats*, to generate detailed activity reports.
d10 2
a11 1
---++ <nop>WebNotify Recent Changes Alert
d13 1
a13 1
Each TWiki web has an automatic email alert service that sends a list of recent changes on a preset schedule, like once a day. Users can subscribe and unsubscribe using %NOTIFYTOPIC% in each web. The Perl script =mailnotify= is called by a background process at regular intervals. The script sends an automated email to subscribed users if topics were changed in a web since the script was last run.
d19 1
a19 1
You can also use =%<nop>MAINWEB%= instead of =Main=, but this is not necessary even if you have renamed the main web by configuring =$mainWebname= in =TWiki.cfg=.  
d21 2
d24 6
a29 1
---+++ Configuring Outgoing Mail
d31 1
a31 1
%WIKITOOLNAME% will use the ==Net::SMTP== module if it is installed on your system. Set this with the ==SMTPMAILHOST== variable in TWikiPreferences.
d33 2
a34 1
The notify e-mail uses the default =changes.tmpl= template, or a skin if activated in the TWikiPreferences.
d36 1
a36 1
mailnotify also relies on two hidden files in each =TWiki/data/[web]= directory: =.changes= and =.mailnotify.= Make sure both are writable by your web server process. =.changes= contains a list of changes; go ahead and make this empty. =.mailnotify= contains a timestamp of the last time notification was done.
d38 6
a43 1
You can use an external mail program, like ==sendmail==, if the =Net::SMTP= module is not installed. Set the program path in ==$mailProgram== in ==TWiki.cfg==.
d45 2
a46 3
	* %H% Net::SMTP can be easily disabled (ex: if there is an installation error) by setting ==SMTPMAILHOST== in TWikiPreferences to an empty value.
 
	* %T% You can set a separate ==SMTPSENDERHOST== variable to define the mail sender host (some SMTP installations require this). 
d48 2
a49 3
---+++ Setting the Automatic Email Schedule

*For Unix platforms:* Edit the =cron= table so that =mailnotify= is called in an interval of your choice. Please consult =man crontab= of how to modify the table that schedules program execution at certain intervals. Example:
d51 1
a51 2
% crontab -e
0 2 * * * (cd /path/to/twiki/bin; ./mailnotify -q)
d53 1
a53 1
The above line will run mailnotify nightly at 02:00. The =-q= switch suppresses all normal output.
d55 2
a56 8
*For ISP installations:* Many ISPs don't allow hosted accounts direct cron access, as it's often used for things that can heavily load the server. Workaround scripts are available.

*On Windows NT/2000:* You can use a scheduled task if you have administrative privileges.
__Note:__ AT on an NT machine is pretty limited.
Microsoft lists several third-party
[[http://www.microsoft.com/ntserver/partners/findoffering/serversolutions/Maintnce.asp#cron][replacements]]. TWiki:Codev/CronTabWin is a free scheduler for Windows.

---++ <nop>WebStatistics Site Usage Log
d62 1
a62 1
---+++ Configuring for Automatic Operation
d65 1
a65 1
		* Make sure variable =$doLogTopicView, $doLogTopicSave and $doLogTopicUpload= in =TWiki.cfg= are set. This will generate log file entries (see below).
d68 2
a69 2
		* __Attention:__ The script must run as the same user as the CGI scripts are running, which is user =nobody= on many systems. Example crontab entry: <br> =0 0 * * * (cd /path/to/TWiki/bin; ./statistics &gt;/dev/null 2&gt;&amp;1)=
		* There is a workaround in case you can't run the script as user =nobody= : Run the utility =twiki/bin/geturl= in your cron job and specify the URL of the =twiki/bin/statistics= script as a parameter. Example: <br> =0 0 * * * (cd /path/to/TWiki/bin; ./geturl mydomain.com /urlpath/to/TWiki/bin/statistics &gt;/dev/null 2&gt;&amp;1)=
d71 1
a71 1
---+++ Generating Statistics Manually by URL
d74 3
a76 3
		* Update current month for all webs: <br> =http://mydomain.com/twiki/bin/statistics=
		* Update current month for Main web only: <br> =http://mydomain.com/twiki/bin/statistics/Main=
		* Update January 2000 for Main web: <br> =http://mydomain.com/twiki/bin/statistics/Main?logdate=200001=
d78 2
a79 1
---+++ Log File Details
d81 2
a82 2
TWiki generates monthly log files which are used by the statistics
	* The log directory is defined by the =$logDir= variable in TWiki.cfg
d84 1
a84 1
	* Example path name: =twiki/data/log%SERVERTIME{$year$mo}%.txt=
d88 2
a89 2
	  =| %SERVERTIME{$day $mon $year - $hour:$min}% | !Main.TWikiGuest | view | !TWiki.WebRss |  | 66.124.232.02 |=
	* Actions are logged if enabled in TWiki.cfg by the =$doLogTopic&lt;action&gt;= flags
d95 4
a98 4
	  | register | =register= | E-mail address |
	  | save | =save= | when replacing existing revision: =repRev 1.3= %BR% when user checks the minor changes box: =dontNotify= |
	  | search | =search= | search string |
	  | rdiff | =rdiff= | =1.4 1.3= |
d101 4
d106 4
a109 1
	  | view | =view= | when viewing non-existing topic: =(not exist)= %BR% when viewing previous topic revision: =r1.3= |
d111 1
d113 1
a113 1
---++ <nop>WebSearch
d115 7
a121 6
WebSearch is an extremely fast and flexible search facility, part of the core TWiki feature set. Options include:
	* topic title or full-text search
	* regular expressions
	* search within web or site-wide
	* index-style A-Z alphabetical listing sorted topic title
	* many more
d123 1
a123 1
See also: TWikiVariables for including hard-coded searches in text.
d125 1
a125 1
---+++ <nop>WebChanges
d127 1
a127 1
To check for the most recently edited topics while on-site, use the WebChanges link, usually located on the upper toolbar. It lists the most recently modified topics, newest first, along with the first couple of lines of the page content. 
d129 1
a129 2
This is simply a preset =SEARCH=. The number of topics listed by the =limit= parameter.:
<blockquote style="background-color:#f5f5f5">
d131 2
a132 1
%<nop>SEARCH{".*" web="%INCLUDINGWEB%" regex="on" nosearch="on" order="modified" <br />reverse="on" limit="50"}%
d134 5
a138 1
</blockquote>
d140 1
a140 1
---+++ <nop>WebIndex
d142 2
a143 6
WebIndex lists all web topics in alphabetical order, with the first couple of lines of text. This is simply a preset =SEARCH=:
<blockquote style="background-color:#f5f5f5">
<pre>
%<nop>SEARCH{"\.*" scope="topic" regex="on" nosearch="on"}%
</pre>
</blockquote>
d145 1
a145 2
-- TWiki:Main.MikeMannix - 01 Dec 2001 %BR%
-- TWiki:Main.PeterThoeny - 28 Aug 2004
@


1.8
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="PeterThoeny" date="1082851827" format="1.0" version="1.8"}%
d16 1
a16 8
TWiki handles <nop>%NOTIFYTOPIC% entries that include the WikiName of a user or a [[%MAINWEB%.TWikiGroups][TWikiGroup]] and an optional e-mail address. Example entries in <nop>%NOTIFYTOPIC%:
<pre>
	 * %MAINWEB%.FredBloggs
	 * %MAINWEB%.FredBloggs - secondary@@home.com
	 * %MAINWEB%.EngineeringGroup
</pre>

The first entry is the default form, the notification gets sent to the e-mail address specified in the user's home page. The second entry lists an alternative e-mail address. The third entry specifies a group, the notification gets sent to each member of the group.
d131 1
a131 1
-- TWiki:Main.PeterThoeny - 24 Apr 2004
@


1.7
log
@none
@
text
@d1 139
a139 113
%META:TOPICINFO{author="PeterThoeny" date="1043912580" format="1.0" version="1.7"}%
%TOC%
%STARTINCLUDE%
---# TWiki Site Tools

_Utilities for searching, navigation, and monitoring site activity_

TWikiSiteTools include utilities for navigating, searching and keeping up with site activity. Preferences can be configured by web or site-wide. You are currently in the *%TWIKIWEB%* web. In particular, TWiki provides two highly configurable, automated site monitoring tools, *<nop>WebNotify*, to email alerts when topics are edited, and *<nop>WebStats*, to generate detailed activity reports.

---++ <nop>WebNotify Recent Changes Alert

Each TWiki web has an automatic email alert service that sends a list of recent changes on a preset schedule, like once a day. Users can subscribe and unsubscribe using %NOTIFYTOPIC% in each web. The Perl script =mailnotify= is called by a background process at regular intervals. The script sends an automated email to subscribed users if topics were changed in a web since the script was last run.

	* You can create a WebNotify link using TWikiVariables with ==%<nop>NOTIFYTOPIC%==

TWiki handles <nop>%NOTIFYTOPIC% entries that include the WikiName of a user or a [[%MAINWEB%.TWikiGroups][TWikiGroup]] and an optional e-mail address. Example entries in <nop>%NOTIFYTOPIC%:
<pre>
	 * %MAINWEB%.FredBloggs
	 * %MAINWEB%.FredBloggs - secondary@@home.com
	 * %MAINWEB%.EngineeringGroup
</pre>

The first entry is the default form, the notification gets sent to the e-mail address specified in the user's home page. The second entry lists an alternative e-mail address. The third entry specifies a group, the notification gets sent to each member of the group.

You can also use =%<nop>MAINWEB%= instead of =Main=, but this is not necessary even if you have renamed the main web by configuring =$mainWebname= in =TWiki.cfg=.  


---+++ Configuring Outgoing Mail

%WIKITOOLNAME% will use the ==Net::SMTP== module if it is installed on your system. Set this with the ==SMTPMAILHOST== variable in TWikiPreferences.

The notify e-mail uses the default =changes.tmpl= template, or a skin if activated in the TWikiPreferences.

mailnotify also relies on two hidden files in each =TWiki/data/[web]= directory: =.changes= and =.mailnotify.= Make sure both are writable by your web server process. =.changes= contains a list of changes; go ahead and make this empty. =.mailnotify= contains a timestamp of the last time notification was done.

You can use an external mail program, like ==sendmail==, if the =Net::SMTP= module is not installed. Set the program path in ==$mailProgram== in ==TWiki.cfg==.

	* %H% Net::SMTP can be easily disabled (ex: if there is an installation error) by setting ==SMTPMAILHOST== in TWikiPreferences to an empty value.
 
	* %T% You can set a separate ==SMTPSENDERHOST== variable to define the mail sender host (some SMTP installations require this). 

---+++ Setting the Automatic Email Schedule

*For Unix platforms:* Edit the =cron= table so that =mailnotify= is called in an interval of your choice. Please consult =man crontab= of how to modify the table that schedules program execution at certain intervals. Example:
<pre>
% crontab -e
15,45 * * * * (cd ~twiki/public_html/bin; ./mailnotify -q)
</pre>
The above line will call mailnotify at 15 minutes and 45 minutes past every hour. The =-q= switch suppresses all normal output.

*For ISP installations:* Many ISPs don't allow hosted accounts direct cron access, as it's often used for things that can heavily load the server. Workaround scripts are available.

*On Windows NT/2000:* You can use a scheduled task if you have administrative privileges.
__Note:__ AT on an NT machine is pretty limited.
Microsoft lists several third-party
[[http://www.microsoft.com/ntserver/partners/findoffering/serversolutions/Maintnce.asp#cron][replacements]]
(as of 2001-11-20, none of them free).

---++ <nop>WebStatistics Site Usage Log

You can generate a listing manually, or on an automated schedule, of visits to individual pages, on a per web basis. Compiled as a running total on a monthly basis. Includes totals for Topic Views, Topic Saves, Attachment Uploads, Most Popular Topics with number of views, and Top Contributors showing total of saves and attachment uploads. Previous months are saved.

	* You can create a WebStatistics link using TWikiVariables with ==%<nop>STATISTICSTOPIC%==

---+++ Configuring for Automatic Operation

	* You can automatically generate usage statistics for all webs. To enable this:
		* Make sure variable =$doLogTopicView, $doLogTopicSave and $doLogTopicUpload= in =TWiki.cfg= are set. This will generate log entries in file =twiki/data/log&lt;date&gt;.txt= .
		* The WebStatistics topic must be present in all webs where you want to have statistics. You can use the topic in the Main web as a template.
		* Call the =twiki/bin/statistics= script from a cron job, once a day is recommended. This will update the WebStatistics topics in all webs.
		* __Attention:__ The script must run as the same user as the CGI scripts are running, which is user =nobody= on most systems. Example crontab entry: <br> =0 0 * * * (cd /path/to/TWiki/bin; ./statistics &gt;/dev/null 2&gt;&amp;1)=
		* There is a workaround in case you can't run the script as user =nobody= : Run the utility =twiki/bin/geturl= in your cron job and specify the URL of the =twiki/bin/statistics= script as a parameter. Example: <br> =0 0 * * * (cd /path/to/TWiki/bin; ./geturl mydomain.com /urlpath/to/TWiki/bin/statistics &gt;/dev/null 2&gt;&amp;1)=

---+++ Generating Statistics Manually by URL

	* The =twiki/bin/statistics= script can also be executed as a CGI script, just enter the URL in your browser. Examples:
		* Update current month for all webs: <br> =http://mydomain.com/twiki/bin/statistics=
		* Update current month for Main web only: <br> =http://mydomain.com/twiki/bin/statistics/Main=
		* Update January 2000 for Main web: <br> =http://mydomain.com/twiki/bin/statistics/Main?logdate=200001=

---++ <nop>WebSearch

WebSearch is an extremely fast and flexible search facility, part of the core TWiki feature set. Options include:
	* topic title or full-text search
	* regular expressions
	* search within web or site-wide
	* index-style A-Z alphabetical listing sorted topic title
	* many more

See also: TWikiVariables for including hard-coded searches in text.

---+++ <nop>WebChanges

To check for the most recently edited topics while on-site, use the WebChanges link, usually located on the upper toolbar. It lists the most recently modified topics, newest first, along with the first couple of lines of the page content. 

This is simply a preset =SEARCH=. The number of topics listed by the =limit= parameter.:
<blockquote style="background-color:#f5f5f5">
<pre>
%<nop>SEARCH{".*" web="%INCLUDINGWEB%" regex="on" nosearch="on" order="modified" <br />reverse="on" limit="50"}%
</pre>
</blockquote>

---+++ <nop>WebIndex

WebIndex lists all web topics in alphabetical order, with the first couple of lines of text. This is simply a preset =SEARCH=:
<blockquote style="background-color:#f5f5f5">
<pre>
%<nop>SEARCH{"\.*" scope="topic" regex="on" nosearch="on"}%
</pre>
</blockquote>

-- Main.MikeMannix - 01 Dec 2001 %BR%
-- Main.PeterThoeny - 30 Jan 2003
@


1.6
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="MikeMannix" date="1020528636" format="1.0" version="1.6"}%
d4 1
a4 1
---# <nop>TWikiSiteTools
d12 14
a25 1
Each TWiki web has an automatic email alert service that sends a list of recent changes on a preset schedule, like once a day. Users can subscribe and unsubscribe using %NOTIFYTOPIC% in each web. The Perl script =mailnotify= is called by a deamon in regular intervals. The script sends an automated email to subscribed users if topics were changed in a web within last interval.
a26 1
	* You can create a WebNotify using TWikiVariables with ==%<nop>NOTIFYTOPIC%==
d32 4
d112 2
a113 1
-- Main.MikeMannix - 01 Dec 2001
@


1.5
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="MikeMannix" date="1007450541" format="1.0" version="1.5"}%
a6 2

---++ Overview
@


1.4
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="MikeMannix" date="1007288520" format="1.0" version="1.4"}%
d20 1
a20 1
%WIKITOOLNAME% will use the =Net::SMTP= module in case it is installed on your system. You need to specify the =SMTPMAILHOST= variable in TWikiPreferences.
d22 5
a26 1
You can use an external mail program like =sendmail= in case the =Net::SMTP= module is not installed. In this case specify the =$mailProgram= in =twiki/bin/TWiki.cfg=.
@


1.3
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="MikeMannix" date="1007201024" format="1.0" version="1.3"}%
d16 2
a40 4
---++ <nop>WebChanges

To check for the most recently edited topics while on-site, use the WebChanges link, usually located on the upper toolbar. It lists the ___ most recently modified, newest first, along with the first couple of lines of the page content.

d45 2
d74 21
a94 1
-- Main.MikeMannix - 30 Nov 2001	
@


1.2
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="MikeMannix" date="1007113980" format="1.0" version="1.2"}%
d14 1
a14 5
Each TWiki web has an automatic email alert service that sends a list of recent changes on a preset schedule, like once a day. Users can subscribe and unsubscribe using %NOTIFYTOPIC% in each web.

---+++ How It Works

The Perl script =mailnotify= is called by a deamon in regular intervals. The script sends an automated email to subscribed users if topics were changed in a web within last interval.
@


1.1
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="MikeMannix" date="1006515285" format="1.0" version="1.1"}%
d10 1
a10 1
TWikiSiteTools include utilities for navigating, searching and keeping up with site activity. Preferences can be configured by web or site-wide. You are currently in the *%TWIKIWEB%* web.
d12 1
a12 5
---++ Monitoring Topic Changes

TWiki provides two highly configurable, automated site monitoring tools, *<nop>WebNotify*, to email alerts when topics are edited, and *<nop>WebStats*, to generate detailed activity reports.

---+++ <nop>WebNotify Recent Changes Alert
d16 1
a16 1
---++++ Setting Up <nop>WebNotify
d20 1
a20 1
---+++++ Configuring Outgoing Mail
d26 1
a26 1
---+++++ Setting the Automatic Email Schedule
d43 1
a43 1
---+++ WebChanges
d47 1
a47 3
---++++ How does it work?

---++ WebStatistics Site Usage Log
d69 6
a74 8
An extremely fast and flexible search facility.

See also: TWikiVariables

---
---++ Docs Comments for this page

	* What about WebChanges: why isn't that covered here?
d76 1
a76 1
	* Need more details on WebNotify: How does it work? Exactly what data is emailed, in what format? 
d78 1
a78 2
-- PeterThoeny - 16 Mar 2001 
-- Main.MikeMannix - 23 Nov 2001	
@
